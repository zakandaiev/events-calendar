"use strict";function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t),t.add(e)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var _init=new WeakSet,_initListeners=new WeakSet,_render=new WeakSet,_getCell=new WeakSet,_getCellEvents=new WeakSet,_renderDay=new WeakSet,_getDayEvents=new WeakSet,_getDayEventMenu=new WeakSet,_updateTools=new WeakSet,_formatEvents=new WeakSet,_setDate=new WeakSet,_isToday=new WeakSet,_isDatesEqual=new WeakSet,_getWeekday=new WeakSet,_getWeekCount=new WeakSet,_getDefault=new WeakSet;class Calendar{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classPrivateMethodInitSpec(this,_getDefault),_classPrivateMethodInitSpec(this,_getWeekCount),_classPrivateMethodInitSpec(this,_getWeekday),_classPrivateMethodInitSpec(this,_isDatesEqual),_classPrivateMethodInitSpec(this,_isToday),_classPrivateMethodInitSpec(this,_setDate),_classPrivateMethodInitSpec(this,_formatEvents),_classPrivateMethodInitSpec(this,_updateTools),_classPrivateMethodInitSpec(this,_getDayEventMenu),_classPrivateMethodInitSpec(this,_getDayEvents),_classPrivateMethodInitSpec(this,_renderDay),_classPrivateMethodInitSpec(this,_getCellEvents),_classPrivateMethodInitSpec(this,_getCell),_classPrivateMethodInitSpec(this,_render),_classPrivateMethodInitSpec(this,_initListeners),_classPrivateMethodInitSpec(this,_init),this.offsets=n.offsets||_classPrivateMethodGet(this,_getDefault,_getDefault2).call(this,"offsets"),this.labels=n.labels||_classPrivateMethodGet(this,_getDefault,_getDefault2).call(this,"labels"),this.icons=n.icons||_classPrivateMethodGet(this,_getDefault,_getDefault2).call(this,"icons"),this.events=_classPrivateMethodGet(this,_formatEvents,_formatEvents2).call(this,t),this.onInit=n.onInit,this.onRender=n.onRender,this.onUpdate=n.onUpdate,this.onPrev=n.onPrev,this.onNext=n.onNext,this.onCurrent=n.onCurrent,this.onDayOpen=n.onDayOpen,this.onDayClose=n.onDayClose,this.onCellClick=n.onCellClick,this.onEventClick=n.onEventClick,this.onEventView=n.onEventView,this.onEventEdit=n.onEventEdit,this.onEventDelete=n.onEventDelete,this.onCreateButtonClick=n.onCreateButtonClick,this.onCreateDayButtonClick=n.onCreateDayButtonClick,this.node=e,this.nodeDay=null,this.nodeBody=null,this.nodeTools=null,this.nodeToolsCreate=null,this.nodeNav=null,this.nodeNavPrev=null,this.nodeNavNext=null,this.nodeNavCurrent=null,this.nodeTable=null,this.nodeCells=[],this.year=null,this.month=null,this.date=null,this.startDate=null,this.today=null,this.activeCell=null,this.node&&(_classPrivateMethodGet(this,_setDate,_setDate2).call(this,n.date),_classPrivateMethodGet(this,_init,_init2).call(this),_classPrivateMethodGet(this,_initListeners,_initListeners2).call(this),this.onInit&&this.onInit(this.node),_classPrivateMethodGet(this,_render,_render2).call(this),this.onRender&&this.onRender(this.node))}update(){return _classPrivateMethodGet(this,_render,_render2).call(this,!0),!0}renderPrev(){return _classPrivateMethodGet(this,_setDate,_setDate2).call(this,new Date(this.year,this.month-1)),this.onPrev&&this.onPrev(this.node),_classPrivateMethodGet(this,_render,_render2).call(this,!0),!0}renderNext(){return _classPrivateMethodGet(this,_setDate,_setDate2).call(this,new Date(this.year,this.month+1)),this.onNext&&this.onNext(this.node),_classPrivateMethodGet(this,_render,_render2).call(this,!0),!0}renderCustomDate(e){return _classPrivateMethodGet(this,_setDate,_setDate2).call(this,e),!e&&this.onCurrent&&this.onCurrent(this.node),_classPrivateMethodGet(this,_render,_render2).call(this,!0),!0}getEvents(){return this.events}getEventById(e){return this.events.find((t=>t.id==e))}addEvent(e){return!!(e&&e.id&&e.date&&e.name)&&(this.events.push(e),this.events=_classPrivateMethodGet(this,_formatEvents,_formatEvents2).call(this,this.events),_classPrivateMethodGet(this,_render,_render2).call(this,!0),!0)}deleteEvent(e){return!!this.getEventById(e)&&(this.events=this.events.filter((t=>t.id!=e)),_classPrivateMethodGet(this,_render,_render2).call(this,!0),!0)}}function _init2(){this.node.className="",this.node.classList.add("calendar"),this.nodeDay=document.createElement("div"),this.nodeDay.classList.add("calendar__day"),this.nodeBody=document.createElement("div"),this.nodeBody.classList.add("calendar__body"),this.nodeTools=document.createElement("div"),this.nodeTools.classList.add("calendar__tools"),this.nodeNav=document.createElement("nav"),this.nodeNav.classList.add("calendar__nav"),this.nodeNavPrev=document.createElement("button"),this.nodeNavPrev.setAttribute("type","button"),this.nodeNavPrev.classList.add("calendar__nav-item","calendar__prev"),this.nodeNavPrev.innerHTML=this.icons.chevron_left,this.nodeNavCurrent=document.createElement("button"),this.nodeNavCurrent.setAttribute("type","button"),this.nodeNavCurrent.classList.add("calendar__nav-item","calendar__nav-item_text","calendar__current"),this.nodeNavNext=document.createElement("button"),this.nodeNavNext.setAttribute("type","button"),this.nodeNavNext.classList.add("calendar__nav-item","calendar__next"),this.nodeNavNext.innerHTML=this.icons.chevron_right,this.nodeNav.appendChild(this.nodeNavPrev),this.nodeNav.appendChild(this.nodeNavCurrent),this.nodeNav.appendChild(this.nodeNavNext),this.nodeToolsCreate=document.createElement("button"),this.nodeToolsCreate.setAttribute("type","button"),this.nodeToolsCreate.classList.add("calendar__button"),this.nodeToolsCreate.innerHTML=this.icons.plus+"<span>"+this.labels.create+"</span>",this.onCreateButtonClick&&this.nodeToolsCreate.addEventListener("click",(e=>{e.preventDefault(),this.onCreateButtonClick(e)})),this.nodeTools.appendChild(this.nodeNav),this.nodeTools.appendChild(this.nodeToolsCreate),this.nodeBody.appendChild(this.nodeTools),this.nodeTable=document.createElement("div"),this.nodeTable.classList.add("calendar__table"),this.nodeBody.appendChild(this.nodeTable),this.node.appendChild(this.nodeDay),this.node.appendChild(this.nodeBody)}function _initListeners2(){this.nodeNavPrev.addEventListener("click",(e=>{e.preventDefault(),this.renderPrev()})),this.nodeNavNext.addEventListener("click",(e=>{e.preventDefault(),this.renderNext()})),this.nodeNavCurrent.addEventListener("click",(e=>{e.preventDefault(),this.renderCustomDate()})),document.addEventListener("click",(e=>{document.querySelectorAll(".calendar__day-item-more").forEach((e=>{e.classList.remove("active")}));const t=e.target.closest(".calendar__day-item-more"),n=e.target.closest(".calendar__day-menu");if(!t)return!1;e.preventDefault(),n&&t.classList.add("active"),t.classList.toggle("active")}))}function _render2(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.nodeCells=[];const t=[],n=document.createElement("div");n.classList.add("calendar__row");for(let e=0;e<7;e++){const t=document.createElement("div");t.classList.add("calendar__cell","calendar__cell_head"),t.textContent=this.labels.weekday[e],n.appendChild(t)}t.push(n);for(let e=1;e<_classPrivateMethodGet(this,_getWeekCount,_getWeekCount2).call(this,this.year,this.month);e++){const e=document.createElement("div");e.classList.add("calendar__row"),_classPrivateMethodGet(this,_getWeekday,_getWeekday2).call(this,this.date)>0&&this.date.setDate(this.date.getDate()-_classPrivateMethodGet(this,_getWeekday,_getWeekday2).call(this,this.date));for(let t=0;t<7;t++)e.appendChild(_classPrivateMethodGet(this,_getCell,_getCell2).call(this,this.date)),this.date.setDate(this.date.getDate()+1);t.push(e)}this.nodeTable.replaceChildren(...t),this.date=new Date(this.year,this.month),_classPrivateMethodGet(this,_updateTools,_updateTools2).call(this),this.nodeDay.style.height=this.nodeBody.offsetHeight+"px",e&&this.onUpdate&&this.onUpdate(this.node)}function _getCell2(e){e=new Date(e.valueOf());const t=document.createElement("div");t.classList.add("calendar__cell"),_classPrivateMethodGet(this,_isToday,_isToday2).call(this,e)&&t.classList.add("current"),e.getMonth()!=this.startDate.getMonth()&&t.classList.add("muted"),t.date=e,t.events=this.events.filter((t=>_classPrivateMethodGet(this,_isDatesEqual,_isDatesEqual2).call(this,e,t.date)))||[];const n=document.createElement("div");return n.classList.add("calendar__date"),n.textContent=e.getDate(),t.replaceChildren(n,_classPrivateMethodGet(this,_getCellEvents,_getCellEvents2).call(this,t.events)),t.addEventListener("click",(n=>{n.preventDefault(),this.nodeCells.forEach((e=>e.classList.remove("active"))),t.classList.add("active"),this.onCellClick&&this.onCellClick(t),this.activeCell=e.getTime(),_classPrivateMethodGet(this,_renderDay,_renderDay2).call(this,t)})),this.activeCell&&e.getTime()==this.activeCell&&t.classList.add("active"),this.nodeCells.push(t),t}function _getCellEvents2(e){let t=0,n=!1;const s=document.createElement("div");return s.classList.add("calendar__events"),e.forEach((a=>{const i=document.createElement("div");if(i.classList.add("calendar__event"),t>=2&&!n&&e.length>3&&(i.classList.add("calendar__event_more"),i.textContent="...",s.appendChild(i),n=!0),n)return!1;i.textContent=a.name,this.onEventClick&&i.addEventListener("click",(e=>{e.preventDefault(),this.onEventClick(a,e)})),s.appendChild(i),t++})),s}function _renderDay2(e){const t=e.date,n=e.events,s=document.createElement("div");s.classList.add("calendar__day-header");const a=document.createElement("span");a.textContent=this.labels.weekday[_classPrivateMethodGet(this,_getWeekday,_getWeekday2).call(this,t)]+" "+t.getDate()+", "+this.labels.month[t.getMonth()]+" "+t.getFullYear();const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("calendar__day-close"),i.addEventListener("click",(t=>{t.preventDefault(),this.activeCell=null,this.nodeCells.forEach((e=>e.classList.remove("active"))),e.classList.remove("active"),this.node.classList.remove("active"),this.onDayClose&&this.onDayClose(this.nodeDay)})),s.appendChild(a),s.appendChild(i);const d=document.createElement("div");d.classList.add("calendar__day-body"),d.replaceChildren(..._classPrivateMethodGet(this,_getDayEvents,_getDayEvents2).call(this,n));const l=document.createElement("div");l.classList.add("calendar__day-footer");const o=document.createElement("button");o.setAttribute("type","button"),o.classList.add("calendar__button"),o.innerHTML=this.icons.plus+"<span>"+this.labels.create+"</span>",this.onCreateDayButtonClick&&o.addEventListener("click",(t=>{t.preventDefault(),this.onCreateDayButtonClick(e.date,t)})),l.appendChild(o);const r=[s,d];e.date.getTime()>this.today.getTime()-this.offsets.create&&r.push(l),this.nodeDay.replaceChildren(...r),this.node.classList.add("active"),this.onDayOpen&&this.onDayOpen(this.nodeDay)}function _getDayEvents2(e){const t=[];return e.forEach((e=>{const n=new Date(e.date),s=(n.getHours()<10?"0":"")+n.getHours()+":"+(n.getMinutes()<10?"0":"")+n.getMinutes(),a=document.createElement("div");a.classList.add("calendar__day-item");const i=document.createElement("time");i.textContent=s;const d=document.createElement("div");d.classList.add("calendar__day-item-data");const l=document.createElement("div");l.classList.add("calendar__day-item-title"),l.textContent=e.name;const o=document.createElement("div");o.classList.add("calendar__day-item-description"),o.textContent=e.description,d.appendChild(l),d.appendChild(o),a.appendChild(i),a.appendChild(d);const r=_classPrivateMethodGet(this,_getDayEventMenu,_getDayEventMenu2).call(this,e);r&&a.appendChild(r),t.push(a)})),t}function _getDayEventMenu2(e){const t=document.createElement("button");t.setAttribute("type","button"),t.classList.add("calendar__day-item-more"),t.innerHTML="<span></span>";const n=document.createElement("div");n.classList.add("calendar__day-menu");const s=document.createElement("div");s.classList.add("calendar__day-menu-item"),s.innerHTML=this.icons.view+"<span>"+this.labels.view+"</span>",this.onEventView&&s.addEventListener("click",(t=>{t.preventDefault(),this.onEventView(e,t)}));const a=document.createElement("div");a.classList.add("calendar__day-menu-item"),a.innerHTML=this.icons.edit+"<span>"+this.labels.edit+"</span>",this.onEventEdit&&a.addEventListener("click",(t=>{t.preventDefault(),this.onEventEdit(e,t)}));const i=document.createElement("div");i.classList.add("calendar__day-menu-item"),i.innerHTML=this.icons.delete+"<span>"+this.labels.delete+"</span>",this.onEventDelete&&i.addEventListener("click",(t=>{t.preventDefault(),this.onEventDelete(e,t)})),!1!==e.showView&&n.appendChild(s);const d=new Date;return d.setMinutes(d.getMinutes()+this.offsets.edit),new Date(e.date)>d&&(!1!==e.showEdit&&n.appendChild(a),!1!==e.showDelete&&n.appendChild(i)),t.appendChild(n),n.childElementCount<1?null:t}function _updateTools2(){this.nodeNavCurrent.innerText=this.labels.month[this.month]+" "+this.year}function _formatEvents2(e){if(!e||!e.length)return[];return(e=e.map((e=>({...e,date:new Date(e.date)})))).sort((function(e,t){return e.date<t.date?-1:e.date>t.date?1:0})),e}function _setDate2(e){e=e?new Date(e):new Date,this.year=e.getFullYear(),this.month=e.getMonth(),this.date=new Date(this.year,this.month),this.startDate=new Date(this.year,this.month),this.today=new Date,this.today.setHours(0,0,0,0)}function _isToday2(e){return _classPrivateMethodGet(this,_isDatesEqual,_isDatesEqual2).call(this,new Date,e)}function _isDatesEqual2(e,t){return e.toDateString()==t.toDateString()}function _getWeekday2(e){let t=e.getDay();return 0==t&&(t=7),t-1}function _getWeekCount2(e,t){const n=new Date(e,t,1),s=new Date(e,t+1,0),a=n.getDay()+6+s.getDate();return Math.ceil(a/7)}function _getDefault2(e){switch(e.toLowerCase()){case"offsets":return{create:60,edit:60};case"labels":return{month:["January","February","March","April","May","June","July","August","September","October","November","December"],weekday:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],create:"Create",view:"View",edit:"Edit",delete:"Delete"};case"icons":return{chevron_left:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>',chevron_right:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6l6 6l-6 6" /></svg>',plus:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',view:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>',edit:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 20l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4h4z" /><path d="M13.5 6.5l4 4" /><path d="M16 18h4" /></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>'}}}